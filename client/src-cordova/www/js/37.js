(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{f889:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"row justify-evenly"},[i("div",{staticClass:"col-12 q-pa-md"},[i("InscriptionAdminComponent")],1)])},n=[],o=i("60a3"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.inscriptionList?i("div",[i("q-table",{attrs:{bordered:"",flat:"",title:"",data:e.inscriptionListFiltered,columns:e.columns,"row-key":"id",loading:e.loading,"rows-per-page-label":"Record per pagina"},scopedSlots:e._u([{key:"top",fn:function(){return[i("q-toolbar",[i("q-toolbar-title",[e._v("Iscrizioni")])],1),i("div",{staticClass:"row q-col-gutter-none justify-end",staticStyle:{width:"100%"}},[i("div",{staticClass:"col-12 col-sm-3"},[i("q-input",{staticClass:"q-ma-sm",attrs:{dense:"",filled:"",clearable:"",square:"",outlined:"","lazy-rules":"ondemand",standout:"bg-primary text-white",autofocus:!0,autocomplete:"new-password",label:"Nome"},model:{value:e.filter.nome,callback:function(t){e.$set(e.filter,"nome",t)},expression:"filter.nome"}})],1),i("div",{staticClass:"col-12 col-sm-3"},[i("q-input",{staticClass:"q-ma-sm",attrs:{dense:"",filled:"",clearable:"",square:"",outlined:"","lazy-rules":"ondemand",standout:"bg-primary text-white",autofocus:!0,autocomplete:"new-password",label:"Email"},model:{value:e.filter.email,callback:function(t){e.$set(e.filter,"email",t)},expression:"filter.email"}})],1),i("div",{staticClass:"col-12 col-sm-3"},[i("q-input",{staticClass:"q-ma-sm",attrs:{dense:"",filled:"",clearable:"",square:"",outlined:"","lazy-rules":"ondemand",standout:"bg-primary text-white",autofocus:!0,autocomplete:"new-password",label:"Telefono"},model:{value:e.filter.phone,callback:function(t){e.$set(e.filter,"phone",t)},expression:"filter.phone"}})],1),i("div",{staticClass:"col-12 col-sm-3"},[i("q-input",{staticClass:"q-ma-sm",attrs:{dense:"",filled:"",clearable:"",square:"",outlined:"","lazy-rules":"ondemand",standout:"bg-primary text-white",autofocus:!0,autocomplete:"new-password",label:"Titolo Evento"},model:{value:e.filter.eventTitle,callback:function(t){e.$set(e.filter,"eventTitle",t)},expression:"filter.eventTitle"}})],1),i("div",{staticClass:"col-12 col-sm-3"},[i("q-select",{staticClass:"q-ma-sm",attrs:{dense:"",filled:"",clearable:"",label:"Corso Scolastico",options:e.eventClassOptions,standout:"bg-primary text-white","lazy-rules":"ondemand",autocomplete:"new-password"},model:{value:e.filter.eventClass,callback:function(t){e.$set(e.filter,"eventClass",t)},expression:"filter.eventClass"}})],1),i("div",{staticClass:"col-12 col-sm-3"},[i("q-select",{staticClass:"q-ma-sm",attrs:{dense:"",filled:"",clearable:"",label:"Classe Frequentata",options:e.classOptions,standout:"bg-primary text-white","lazy-rules":"ondemand",autocomplete:"new-password"},model:{value:e.filter.class,callback:function(t){e.$set(e.filter,"class",t)},expression:"filter.class"}})],1)])]},proxy:!0},{key:"loading",fn:function(){return[i("Loader",{attrs:{loading:!0}})]},proxy:!0},{key:"body-cell-buttonsAgvInscription",fn:function(t){return[i("q-td",{attrs:{props:t}},[i("div",[i("q-btn",{attrs:{unelevated:"",color:"primary",icon:"assignment"},on:{click:function(){return e.showInscriptionDetail(t.row)}}})],1)])]}}],null,!1,1832450032)}),i("InscriptionViewerDialog",{attrs:{inscription:e.selectedAgvInscription,showModal:e.showInscriptionViewerDialog,close:function(){return e.showInscriptionViewerDialog=!1}}})],1):e._e()},a=[],r=i("45cb"),c=i("f658"),p=i("12ae"),d=i("5848"),u=i("4afd"),m=i("4bb5");const f={name:"nameAgvInscription",required:!0,label:"Nome",align:"left",field:e=>`${e.nome} ${e.cognome}`,sortable:!0,classes:"ellipsis",style:"max-width: 200px"},v={name:"classAgvInscription",required:!0,label:"Classe frequentata",align:"left",field:e=>e.class,sortable:!0,classes:"ellipsis",style:"max-width: 100px"},b={name:"emailAgvInscription",required:!0,label:"Email",align:"left",field:e=>e.email,sortable:!0,classes:"ellipsis",style:"max-width: 100px"},h={name:"phoneAgvInscription",required:!0,label:"Telefono",align:"left",field:e=>e.phone,sortable:!0,classes:"ellipsis",style:"max-width: 100px"},g={name:"eventTitleAgvInscription",required:!0,label:"Titolo dell'evento",align:"left",field:e=>e.eventTitle||"",sortable:!0,classes:"ellipsis",style:"max-width: 200px"},y={name:"buttonsAgvInscription",label:"",align:"",style:""},w=[f,v,b,h,g,y];function C(e,t){return!t||(!t.eventClass||t.eventClass===e.eventClass)&&(!t.class||t.class===e.class)&&(!t.eventTitle||-1!==(e.eventTitle||"").toLowerCase().indexOf(t.eventTitle.toLowerCase()))&&(!t.email||-1!==e.email.toLowerCase().indexOf(t.email.toLowerCase()))&&(!t.phone||-1!==e.phone.toLowerCase().indexOf(t.phone.toLowerCase()))&&(!t.nome||-1!==`${e.nome} ${e.cognome}`.toLowerCase().indexOf(t.nome.toLowerCase()))}function q(e,t){return e.filter((e=>C(e,t)))}var O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Dialog",{attrs:{loading:e.showLoading,close:function(){return e.onClose()},showModal:e.showModal,title:"Dettagli di iscrizione",styleDialog:"width: 600px; max-width: 80vw"}},[i("template",{slot:"content"},[i("InscriptionViewer",{attrs:{inscription:e.inscription,close:function(){return e.onClose()},showLoading:function(t){return e.showLoading=t}}})],1)],2)},x=[],I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-sm-6"},[i("q-input",{staticClass:"q-ma-sm",attrs:{square:"",outlined:"",readonly:"",label:"Nome"},model:{value:e.inscription.nome,callback:function(t){e.$set(e.inscription,"nome",t)},expression:"inscription.nome"}})],1),i("div",{staticClass:"col-12 col-sm-6"},[i("q-input",{staticClass:"q-ma-sm",attrs:{square:"",outlined:"",readonly:"",label:"Cognome"},model:{value:e.inscription.cognome,callback:function(t){e.$set(e.inscription,"cognome",t)},expression:"inscription.cognome"}})],1),i("div",{staticClass:"col-12 col-sm-6"},[i("q-input",{staticClass:"q-ma-sm",attrs:{square:"",outlined:"",readonly:"",value:e.inscription.class||"-","lazy-rules":"ondemand",label:"Classe frequentata"}})],1),i("div",{staticClass:"col-12 col-sm-6"},[i("q-input",{staticClass:"q-ma-sm",attrs:{square:"",outlined:"",readonly:"",type:"email","lazy-rules":"ondemand",label:"Indirizzo email"},model:{value:e.inscription.email,callback:function(t){e.$set(e.inscription,"email",t)},expression:"inscription.email"}})],1),i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{staticClass:"q-ma-sm",attrs:{square:"",outlined:"",readonly:"",label:"Telefono",type:"number"},model:{value:e.inscription.phone,callback:function(t){e.$set(e.inscription,"phone",t)},expression:"inscription.phone"}})],1),i("div",{staticClass:"col-12 col-md-6"},[i("q-input",{staticClass:"q-ma-sm",attrs:{square:"",outlined:"",readonly:"",value:e.getFormatDate(e.inscription.date),label:"Fecha di Iscrizione"}})],1)]),i("q-input",{staticClass:"q-ma-sm",attrs:{square:"",outlined:"",readonly:"",autogrow:"",label:"Messaggio"},model:{value:e.inscription.message,callback:function(t){e.$set(e.inscription,"message",t)},expression:"inscription.message"}}),i("q-card-actions",{staticClass:"text-primary"},[i("q-btn",{staticClass:"col-12 col-sm-auto",attrs:{unelevated:"",color:"primary",align:"center",label:"Close"},on:{click:function(){return e.close()}}})],1)],1)},j=[],T=i("c1df"),L=i.n(T),D=function(e,t,i,s){var n,o=arguments.length,l=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l};let k=class extends o["Vue"]{getFormatDate(e){return L()(e).format("DD/MM/YYYY")}};D([Object(o["Prop"])()],k.prototype,"close",void 0),D([Object(o["Prop"])()],k.prototype,"showLoading",void 0),D([Object(o["Prop"])({required:!0})],k.prototype,"inscription",void 0),k=D([Object(o["Component"])({})],k);var P=k,$=P,A=i("2877"),E=i("27f9"),R=i("4b7e"),_=i("9c40"),F=i("eebe"),S=i.n(F),z=Object(A["a"])($,I,j,!1,null,null,null),V=z.exports;S()(z,"components",{QInput:E["a"],QCardActions:R["a"],QBtn:_["a"]});var N=i("1d08"),Q=function(e,t,i,s){var n,o=arguments.length,l=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l};let M=class extends o["Vue"]{constructor(){super(...arguments),this.showLoading=!1}onClose(){this.close&&this.close()}};Q([Object(o["Prop"])({default:!1})],M.prototype,"showModal",void 0),Q([Object(o["Prop"])()],M.prototype,"close",void 0),Q([Object(o["Prop"])({required:!0})],M.prototype,"inscription",void 0),M=Q([Object(o["Component"])({components:{InscriptionViewer:V,Dialog:N["a"]}})],M);var W=M,Y=W,J=Object(A["a"])(Y,O,x,!1,null,null,null),B=J.exports,K=function(e,t,i,s){var n,o=arguments.length,l=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l},G=function(e,t,i,s){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function l(e){try{r(s.next(e))}catch(t){o(t)}}function a(e){try{r(s["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):n(e.value).then(l,a)}r((s=s.apply(e,t||[])).next())}))};let H=class extends o["Vue"]{constructor(){super(...arguments),this.eventTitleOptions=[],this.columns=w,this.loading=!1,this.showInscriptionViewerDialog=!1,this.eventClassOptions=r["a"],this.classOptions=[],this.inscriptionListFiltered=[],this.selectedAgvInscription=null,this.filter={email:"",eventTitle:"",eventClass:"",nome:"",phone:"",class:""}}onChangeListInscription(){this.inscriptionListFiltered=q(this.inscriptionList,this.filter)}filterItems(){this.inscriptionListFiltered=q(this.inscriptionList,this.filter),this.setFilterStorage()}setFilterStorage(){localStorage.setItem(p["a"].KEY_INSCRIPTION_ADMIN_FILTER,JSON.stringify(this.filter))}getFilterStorage(){const e=localStorage.getItem(p["a"].KEY_INSCRIPTION_ADMIN_FILTER);return e?JSON.parse(e):{eventTitle:"",email:"",eventClass:"",nome:"",phone:"",class:""}}showInscriptionDetail(e){this.selectedAgvInscription=e,this.showInscriptionViewerDialog=!0}mounted(){return G(this,void 0,void 0,(function*(){yield this.loadData(),yield this.loadEventData();const e=new c["a"],t=yield e.getPollConfig();this.classOptions=t.options.class,this.eventTitleOptions=yield this.getEvenstTitles(),this.filter=this.getFilterStorage(),this.inscriptionListFiltered=q(this.inscriptionList,this.filter)}))}};K([Object(m["a"])(u["a"].agvAllInscriptions,{namespace:u["e"]})],H.prototype,"loadData",void 0),K([Object(m["a"])(d["a"].agvAllEvents,{namespace:d["d"]})],H.prototype,"loadEventData",void 0),K([Object(m["b"])(u["b"].getAgvInscriptions,{namespace:u["e"]})],H.prototype,"inscriptionList",void 0),K([Object(m["a"])(d["a"].agvGetEventsTitle,{namespace:d["d"]})],H.prototype,"getEvenstTitles",void 0),K([Object(o["Watch"])("inscriptionList")],H.prototype,"onChangeListInscription",null),K([Object(o["Watch"])("filter.email"),Object(o["Watch"])("filter.eventTitle"),Object(o["Watch"])("filter.eventClass"),Object(o["Watch"])("filter.nome"),Object(o["Watch"])("filter.phone"),Object(o["Watch"])("filter.class")],H.prototype,"filterItems",null),H=K([Object(o["Component"])({components:{InscriptionViewerDialog:B}})],H);var U=H,X=U,Z=i("eaac"),ee=i("65c6"),te=i("6ac5"),ie=i("ddd8"),se=i("db86"),ne=Object(A["a"])(X,l,a,!1,null,null,null),oe=ne.exports;S()(ne,"components",{QTable:Z["a"],QToolbar:ee["a"],QToolbarTitle:te["a"],QInput:E["a"],QSelect:ie["a"],QTd:se["a"],QBtn:_["a"]});var le=function(e,t,i,s){var n,o=arguments.length,l=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l};let ae=class extends o["Vue"]{};ae=le([Object(o["Component"])({components:{InscriptionAdminComponent:oe}})],ae);var re=ae,ce=re,pe=i("9989"),de=Object(A["a"])(ce,s,n,!1,null,null,null);t["default"]=de.exports;S()(de,"components",{QPage:pe["a"]})}}]);