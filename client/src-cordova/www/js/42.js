(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{"78f8":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"row justify-evenly"},[n("div",{staticClass:"col-12 q-pa-md"},[n("ServicesComponent")],1)])},i=[],s=n("60a3"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%"}},[t.innerLoading?t._e():n("q-card",{staticClass:"bg-grey-1",attrs:{flat:"",bordered:""}},[n("q-card-section",[n("div",{staticClass:"row items-center justify-between q-table"},[n("div",{staticClass:"col-12 col-sm-auto no-wrap"},[n("div",{staticClass:"q-table__title ellipsis"},[t._v("\n            "+t._s(t.translationContent.CASINA_SERVICES_ADMIN_TITLE)+"\n          ")])]),n("div",{staticClass:"flex q-pb-sm justify-end col-12 col-sm-auto row"},[n("q-btn",{staticClass:"col-12 col-sm-auto q-ml-sm q-mb-sm",attrs:{unelevated:"",color:"primary",icon:"save",label:t.translationContent.WGO_SAVE_BTN,"no-caps":""},on:{click:function(){return t.saveData()}}})],1)]),n("div",[n("TranslationComponent",{attrs:{translation:t.transService,onChange:function(e,n){return t.onChangeIndexContent(t.traslationServiceValue,e,n)}}})],1)]),n("q-separator",{attrs:{inset:""}}),n("q-card-section",[n("div",[n("q-input",{attrs:{flat:"",dense:"","lazy-rules":"ondemand",standout:"bg-primary text-white",autofocus:!0,label:t.translationContent.CASINA_SERVICES_ADMIN_SEARCH_LABEL},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.searchFilter.apply(null,arguments))}},scopedSlots:t._u([{key:"append",fn:function(){return[""!==t.search?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:t.cleanFilter}}):t._e(),n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"search"},on:{click:t.searchFilter}})]},proxy:!0},{key:"after",fn:function(){return[n("q-btn",{staticClass:"q-ml-sm",attrs:{unelevated:"",color:"primary",icon:"add",label:t.translationContent.WGO_ADD_BTN,"no-caps":""},on:{click:function(){return t.showAddEditorDialog=!0}}})]},proxy:!0}],null,!1,2968977182),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),n("q-card-section",[n("div",{staticClass:"q-pa-none",staticStyle:{width:"100%"}},[t.services.length?n("q-list",[t._l(t.services,(function(e){return[n("ServiceEditorExpanded",{key:e.id,attrs:{service:e,onSuccess:t.onSuccess,icon:"medical_services",title:e.content.title,groupName:"storageServices",showLoading:function(e){return t.loading=e}}})]}))],2):t._e(),n("div",{staticClass:"q-pa-lg flex flex-center"},[t.services.length?n("q-pagination",{attrs:{max:t.maxPage,input:"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)],1)])],1),n("ServiceEditorDialog",{attrs:{showModal:t.showAddEditorDialog,onSuccess:t.onSuccess}}),n("Loader",{attrs:{loading:t.innerLoading||t.loading}})],1)},r=[],c=n("1e1a"),l=n("7bf7"),d=n("7641"),p=n("4bb5"),u=n("b568"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{showModal:t.showModal,loading:t.showLoading,title:t.translationContent.CASINA_SERVICES_ADMIN_CREATE_SERVICE_LABEL,close:function(){return t.onClose(!1)}}},[n("template",{slot:"content"},[n("ServiceEditor",{attrs:{close:t.onSuccess,showLoading:function(e){return t.showLoading=e}}})],1)],2)},f=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("TranslationSimpleComponent",{staticClass:"q-pa-sm",attrs:{translation:t.transTitle,label:t.translationContent.CASINA_SERVICES_ADMIN_TITLE_LABEL,onChange:function(e,n){return t.onChangeTranslation("title",e,n)}}}),n("TranslationSimpleComponent",{staticClass:"q-pa-sm",attrs:{translation:t.transDescription,label:t.translationContent.CASINA_SERVICES_ADMIN_DESCRIPTION_LABEL,onChange:function(e,n){return t.onChangeTranslation("description",e,n)}}})],1)]),n("q-card-section",{staticClass:"justify-center text-primary row"},[t.showClose?n("q-btn",{staticClass:"col-12 col-sm-auto q-mt-sm",attrs:{unelevated:"",icon:"close",color:"primary",align:"center",label:t.translationContent.WGO_CLOSE_BTN},on:{click:function(){return t.close(!1)}}}):t._e(),t.showDelete?n("q-btn",{staticClass:"col-12 col-sm-auto q-mt-sm",attrs:{unelevated:"",icon:"delete",color:"primary",align:"center",label:t.translationContent.WGO_DELETE_BTN},on:{click:function(){return t.showDeleteConfirm=!0}}}):t._e(),n("q-btn",{staticClass:"col-12 col-sm-auto q-mt-sm",attrs:{unelevated:"",icon:"save",color:"primary",align:"center",disable:!t.isValid(),label:t.translationContent.WGO_SAVE_BTN},on:{click:function(){return t.updateProps()}}})],1),n("ConfirmDialog",{attrs:{icon:"delete",showModal:t.showDeleteConfirm,cancelButton:t.translationContent.WGO_CLOSE_BTN,okButton:t.translationContent.WGO_DELETE_BTN,text:t.translationContent.CASINA_SERVICES_ADMIN_DELETE_TEXT,onConfirm:t.deleteService,onClose:function(){return t.showDeleteConfirm=!1}}})],1)},C=[],g=n("149f"),m=n("8924"),y=n("ea1a"),S=function(t,e,n,o){var i,s=arguments.length,a=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},E=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{c(o.next(t))}catch(e){s(e)}}function r(t){try{c(o["throw"](t))}catch(e){s(e)}}function c(t){t.done?n(t.value):i(t.value).then(a,r)}c((o=o.apply(t,e||[])).next())}))};let _=class extends s["Vue"]{constructor(){super(),this.form={id:0,type:u["a"],content:{titleKey:"",descriptionKey:"",title:"",description:""}},this.showDeleteConfirm=!1,this.translations={},this.transTitle={key:"transTitle",id:"transTitle"},this.transDescription={key:"transDescription",id:"transDescription"},this.service&&(this.form=Object.assign({},this.service),this.transDescription.key=this.service.content.descriptionKey,this.transDescription.id=this.service.content.descriptionKey,this.transTitle.key=this.service.content.titleKey,this.transTitle.id=this.service.content.titleKey)}isValid(){return!0}onChangeTranslation(t,e,n){t in this.translations||(this.translations[t]={}),this.translations[t][e]=n}deleteService(){return E(this,void 0,void 0,(function*(){this.showLoading(!0),(yield this.deleteServiceItem(this.form.id))?(this.close&&this.close(!0),this.notify({message:this.translationContent.CASINA_SERVICES_ADMIN_SUCCESS_DELETE,type:"positive"})):this.notify({message:this.translationContent.CASINA_SERVICES_ADMIN_FAIL_DELETE,type:"negative"}),this.showLoading(!1)}))}getTranslationItem(t){return Object.keys(t).map((e=>{const n=parseInt(e);return{languageId:n,value:t[n]}}))}updateProps(){return E(this,void 0,void 0,(function*(){this.showLoading(!0);const t=this.translations.description?this.getTranslationItem(this.translations.description):[],e=this.translations.title?this.getTranslationItem(this.translations.title):[],n={id:this.form.id,type:this.form.type,content:JSON.stringify({description:t,title:e})},o=this.service?yield this.modifyServiceItem(n):yield this.createServiceItem(n);o?(this.notify({message:this.service?this.translationContent.CASINA_SERVICES_ADMIN_SUCCESS_EDIT:this.translationContent.CASINA_SERVICES_ADMIN_SUCCESS_CREATE,type:"positive"}),this.close&&this.close(!0)):this.notify({message:this.service?this.translationContent.CASINA_SERVICES_ADMIN_FAIL_EDIT:this.translationContent.CASINA_SERVICES_ADMIN_FAIL_CREATE,type:"negative"}),this.showLoading(!1)}))}};S([Object(s["Prop"])()],_.prototype,"close",void 0),S([Object(s["Prop"])()],_.prototype,"showLoading",void 0),S([Object(s["Prop"])()],_.prototype,"service",void 0),S([Object(s["Prop"])({default:!0})],_.prototype,"showClose",void 0),S([Object(s["Prop"])({default:!1})],_.prototype,"showDelete",void 0),S([Object(p["b"])(d["b"].getTranslations,{namespace:d["e"]})],_.prototype,"translationContent",void 0),S([Object(p["a"])(y["a"].notify,{namespace:y["c"]})],_.prototype,"notify",void 0),S([Object(p["a"])(l["a"].createStorageItem,{namespace:l["e"]})],_.prototype,"createServiceItem",void 0),S([Object(p["a"])(l["a"].modifyStorageItem,{namespace:l["e"]})],_.prototype,"modifyServiceItem",void 0),S([Object(p["a"])(l["a"].deleteStorageItem,{namespace:l["e"]})],_.prototype,"deleteServiceItem",void 0),_=S([Object(s["Component"])({components:{ConfirmDialog:g["a"],TranslationSimpleComponent:m["a"]}})],_);var b=_,I=b,A=n("2877"),O=n("a370"),T=n("9c40"),w=n("eebe"),D=n.n(w),j=Object(A["a"])(I,v,C,!1,null,null,null),N=j.exports;D()(j,"components",{QCardSection:O["a"],QBtn:T["a"]});var L=n("1d08"),P=function(t,e,n,o){var i,s=arguments.length,a=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a};let x=class extends s["Vue"]{constructor(){super(...arguments),this.showLoading=!1}onClose(t){this.onSuccess&&this.onSuccess(t)}};P([Object(p["b"])(d["b"].getTranslations,{namespace:d["e"]})],x.prototype,"translationContent",void 0),P([Object(s["Prop"])({default:!1})],x.prototype,"showModal",void 0),P([Object(s["Prop"])()],x.prototype,"onSuccess",void 0),x=P([Object(s["Component"])({components:{ServiceEditor:N,Dialog:L["a"]}})],x);var R=x,k=R,q=Object(A["a"])(k,h,f,!1,null,null,null),V=q.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Expanded",{attrs:{label:t.title,group:t.groupName,icon:t.icon}},[n("template",{slot:"content"},[n("div",{staticClass:"q-pa-sm"},[n("ServiceEditor",{attrs:{service:t.service,showLoading:t.showLoading,showDelete:!1,close:t.onSuccess,showClose:!1}})],1),n("ConfirmDialog",{attrs:{icon:"delete",showModal:t.showDeleteConfirm,cancelButton:t.translationContent.WGO_CLOSE_BTN,okButton:t.translationContent.WGO_DELETE_BTN,text:t.translationContent.CASINA_SERVICES_ADMIN_DELETE_TEXT,onConfirm:t.deleteService,onClose:function(){return t.showDeleteConfirm=!1}}})],1),n("template",{slot:"buttons"},[n("q-btn",{attrs:{flat:"",dense:"",icon:"delete",color:"negative"},on:{click:function(){return t.showDeleteConfirm=!0}}})],1)],2)},B=[],Q=n("bfaf"),F=n("e07f"),W=function(t,e,n,o){var i,s=arguments.length,a=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},G=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{c(o.next(t))}catch(e){s(e)}}function r(t){try{c(o["throw"](t))}catch(e){s(e)}}function c(t){t.done?n(t.value):i(t.value).then(a,r)}c((o=o.apply(t,e||[])).next())}))};let X=class extends s["Vue"]{constructor(){super(...arguments),this.showDeleteConfirm=!1}deleteService(){return G(this,void 0,void 0,(function*(){this.showLoading(!0),(yield this.deleteServiceItem(this.service.id))?(this.onSuccess&&this.onSuccess(!0),this.notify({message:this.translationContent.CASINA_SERVICES_ADMIN_SUCCESS_DELETE,type:"positive"})):this.notify({message:this.translationContent.CASINA_SERVICES_ADMIN_FAIL_DELETE,type:"negative"}),this.showLoading(!1)}))}};W([Object(s["Prop"])()],X.prototype,"groupName",void 0),W([Object(s["Prop"])()],X.prototype,"icon",void 0),W([Object(s["Prop"])()],X.prototype,"title",void 0),W([Object(s["Prop"])()],X.prototype,"service",void 0),W([Object(s["Prop"])()],X.prototype,"showLoading",void 0),W([Object(s["Prop"])()],X.prototype,"onSuccess",void 0),W([Object(p["a"])(l["a"].deleteStorageItem,{namespace:l["e"]})],X.prototype,"deleteServiceItem",void 0),W([Object(p["b"])(d["b"].getTranslations,{namespace:d["e"]})],X.prototype,"translationContent",void 0),W([Object(p["a"])(y["a"].notify,{namespace:F["a"]})],X.prototype,"notify",void 0),X=W([Object(s["Component"])({components:{ServiceEditor:N,Expanded:Q["a"],ConfirmDialog:g["a"]}})],X);var K=X,U=K,$=n("3b73"),J=n("eb85"),z=n("f09f"),H=Object(A["a"])(U,M,B,!1,null,null,null),Y=H.exports;D()(H,"components",{QBtn:T["a"],QExpansionItem:$["a"],QSeparator:J["a"],QCard:z["a"],QCardSection:O["a"]});var Z=n("7fa3"),tt=n("0dd7"),et=function(t,e,n,o){var i,s=arguments.length,a=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},nt=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{c(o.next(t))}catch(e){s(e)}}function r(t){try{c(o["throw"](t))}catch(e){s(e)}}function c(t){t.done?n(t.value):i(t.value).then(a,r)}c((o=o.apply(t,e||[])).next())}))};let ot=class extends s["Vue"]{constructor(){super(...arguments),this.innerLoading=!0,this.loading=!1,this.traslationServiceValue={},this.transService={key:tt["c"],id:tt["c"]},this.maxPage=0,this.currentPage=1,this.servicesCount=0,this.servicesXPage=5,this.search="",this.services=[],this.showAddEditorDialog=!1}loadFilter(){return nt(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.loadServices({type:u["a"],urlApi:c["a"].API_STATIC_BASE,search:this.search,skip:(this.currentPage-1)*this.servicesXPage,take:this.servicesXPage,lang:this.language?this.language.id:0,loadTranslations:!1});this.servicesCount=t.storageItemsCount,this.services=t.storageItems,this.maxPage=Math.floor(this.servicesCount/this.servicesXPage)+(this.servicesCount%this.servicesXPage>0?1:0),this.loading=!1}))}onChangeIndexContent(t,e,n){t[e]=n}getTranslationItem(t,e){return Object.keys(t).map((n=>{const o=parseInt(n);return{languageId:o,key:e,value:t[o]}}))}saveData(){return nt(this,void 0,void 0,(function*(){this.loading=!0;let t=[];t=this.getTranslationItem(this.traslationServiceValue,tt["c"]);const e={imageId:0,translations:t};if(yield this.setCasinaIndexContent(e)){const t={};this.language.id in this.traslationServiceValue&&(t[tt["c"]]=this.traslationServiceValue[this.language.id]),this.addTranslations(t),this.notify({message:this.translationContent.CASINA_SERVICES_ADMIN_CONTENT_SUCCESS_EDIT,type:"positive"})}else this.notify({message:this.translationContent.CASINA_SERVICES_ADMIN_CONTENT_FAIL_EDIT,type:"negative"});this.loading=!1}))}onSuccess(t){return nt(this,void 0,void 0,(function*(){this.showAddEditorDialog=!1,t&&(yield this.loadFilter())}))}searchFilter(){return nt(this,void 0,void 0,(function*(){this.currentPage=1,yield this.loadFilter()}))}cleanFilter(){return nt(this,void 0,void 0,(function*(){this.search="",yield this.searchFilter()}))}created(){return nt(this,void 0,void 0,(function*(){yield this.registerTranslations(u["b"]),this.transService.value=this.translationContent.CASINA_INDEX_SERVICES_TEXT,yield this.loadFilter(),this.innerLoading=!1}))}};et([Object(p["a"])(d["a"].registerTranslations,{namespace:d["e"]})],ot.prototype,"registerTranslations",void 0),et([Object(p["b"])(d["b"].getTranslations,{namespace:d["e"]})],ot.prototype,"translationContent",void 0),et([Object(p["b"])(d["b"].getLanguage,{namespace:d["e"]})],ot.prototype,"language",void 0),et([Object(p["a"])(l["a"].getServicesByPagination,{namespace:l["e"]})],ot.prototype,"loadServices",void 0),et([Object(p["a"])(l["a"].setCasinaIndexContent,{namespace:l["e"]})],ot.prototype,"setCasinaIndexContent",void 0),et([Object(p["c"])(d["d"].addTranslations,{namespace:d["e"]})],ot.prototype,"addTranslations",void 0),et([Object(p["a"])(y["a"].notify,{namespace:F["a"]})],ot.prototype,"notify",void 0),et([Object(s["Watch"])("currentPage"),Object(s["Watch"])("language")],ot.prototype,"loadFilter",null),ot=et([Object(s["Component"])({components:{ServiceEditorDialog:V,ServiceEditorExpanded:Y,TranslationComponent:Z["a"]}})],ot);var it=ot,st=it,at=n("eaac"),rt=n("27f9"),ct=n("0016"),lt=n("1c1c"),dt=n("3b16"),pt=Object(A["a"])(st,a,r,!1,null,null,null),ut=pt.exports;D()(pt,"components",{QCard:z["a"],QCardSection:O["a"],QTable:at["a"],QBtn:T["a"],QSeparator:J["a"],QInput:rt["a"],QIcon:ct["a"],QList:lt["a"],QPagination:dt["a"]});var ht=function(t,e,n,o){var i,s=arguments.length,a=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a};let ft=class extends s["Vue"]{};ft=ht([Object(s["Component"])({components:{ServicesComponent:ut}})],ft);var vt=ft,Ct=vt,gt=n("9989"),mt=Object(A["a"])(Ct,o,i,!1,null,null,null);e["default"]=mt.exports;D()(mt,"components",{QPage:gt["a"]})}}]);