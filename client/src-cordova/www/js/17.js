(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"54cd":function(e,t,a){},f1ea:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"page-quasar-tiptap-basic"},[e.template&&e.template.styleTemplate?a("div",{staticClass:"q-pa-md",staticStyle:{width:"100%"}},[a("q-card",{staticClass:"my-card bg-grey-1",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"row items-center justify-between q-table"},[a("div",{staticClass:"col-12 col-sm-auto no-wrap"},[a("div",{staticClass:"q-table__title ellipsis"},[e._v("Bill Template")])]),a("div",{staticClass:"flex q-pb-sm justify-end col-12 col-sm-auto row",staticStyle:{"justify-content":"flex-end"}},[a("q-btn",{staticClass:"col-12 col-sm-auto q-ml-sm q-mb-sm",attrs:{unelevated:"",color:"primary",icon:"preview",label:"Preview","no-caps":""},on:{click:e.getPreview}}),a("q-btn",{staticClass:"col-12 col-sm-auto q-ml-sm q-mb-sm",attrs:{unelevated:"",color:"primary",icon:"save",label:"Save Template","no-caps":""},on:{click:e.save}})],1)])]),a("q-card-section",[a("q-select",{attrs:{label:"Template Type",options:e.templateOptions},model:{value:e.selectedTemplate,callback:function(t){e.selectedTemplate=t},expression:"selectedTemplate"}}),a("LanguageSimpleSelect",{attrs:{fullWidth:!0,language:e.language,langSelected:e.changeLanguage}}),a("div",{staticClass:"q-pb-lg"},[a("q-input",{attrs:{filled:"",type:"textarea",label:"Template",rows:20},model:{value:e.template.body,callback:function(t){e.$set(e.template,"body",t)},expression:"template.body"}})],1),a("div",[a("q-input",{attrs:{filled:"",type:"textarea",label:"Template style",rows:20},model:{value:e.template.styleTemplate.body,callback:function(t){e.$set(e.template.styleTemplate,"body",t)},expression:"template.styleTemplate.body"}})],1)],1),a("q-card-actions")],1),a("q-dialog",{attrs:{"full-height":"","full-width":"","auto-close":""},model:{value:e.showPreview,callback:function(t){e.showPreview=t},expression:"showPreview"}},[a("q-card",{staticClass:"column flex full-height full-width"},[a("iframe",{staticClass:"col",attrs:{srcdoc:e.content,height:"100%",width:"100%"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{unelevated:"",flat:"",label:"Cancel"}})],1)],1)],1):e._e()])},i=[],s=a("4bb5"),n=a("60a3"),o=a("5bde"),c=a("127a"),p=a("c5b9"),d=a("ea1a"),r=a("7641"),u=function(e,t,a,l){var i,s=arguments.length,n=s<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,a):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,l);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(n=(s<3?i(n):s>3?i(t,a,n):i(t,a))||n);return s>3&&n&&Object.defineProperty(t,a,n),n},m=function(e,t,a,l){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function n(e){try{c(l.next(e))}catch(t){s(t)}}function o(e){try{c(l["throw"](e))}catch(t){s(t)}}function c(e){e.done?a(e.value):i(e.value).then(n,o)}c((l=l.apply(e,t||[])).next())}))};let h=class extends n["Vue"]{constructor(){super(...arguments),this.template={},this.editorConfig={allowedContent:!0,fullPage:!0},this.content="",this.showPreview=!1,this.templateOptions=["BILL_TEMPLATE","BILL_EMAIL_TEMPLATE"],this.selectedTemplate=this.templateOptions[0],this.language=this.languageGlobal,this.translations={}}save(){return m(this,void 0,void 0,(function*(){const e=yield this.saveStyleTemplate({template:this.template.styleTemplate,documentToSet:this.template.id}),t=yield this.saveTemplate({value:this.template,langId:this.language.id});e&&t&&this.notify({message:"Bill template modified successfully ",type:"positive"})}))}getPreview(){return m(this,void 0,void 0,(function*(){this.content=yield this.getBillDocumentPreview({entityTemplate:this.selectedTemplate,idBill:this.bills.length>0?this.bills[0].id:0,templateHTML:this.template.body,templateStyle:this.template.styleTemplate.body}),this.showPreview=!0}))}changeLanguage(e){return m(this,void 0,void 0,(function*(){this.language=e,yield this.getTemplate()}))}setGlobalLanguage(){return m(this,void 0,void 0,(function*(){yield this.changeLanguage(this.languageGlobal)}))}getTemplateBySelection(){return m(this,void 0,void 0,(function*(){yield this.getTemplate()}))}getTemplate(){return m(this,void 0,void 0,(function*(){this.language.id in this.translations&&this.translations[this.language.id]&&this.selectedTemplate in this.translations[this.language.id]?this.template=this.translations[this.language.id][this.selectedTemplate]:(this.template=yield this.loadTemplate({entityTemplate:this.selectedTemplate,langId:this.language.id}),this.translations[this.language.id]||(this.translations[this.language.id]={}),this.translations[this.language.id][this.selectedTemplate]=this.template)}))}mounted(){return m(this,void 0,void 0,(function*(){yield this.loadData(!1),this.languageGlobal&&(yield this.setGlobalLanguage())}))}};u([Object(s["a"])(o["a"].loadBills,{namespace:c["d"]})],h.prototype,"loadData",void 0),u([Object(s["b"])(c["c"].getBills,{namespace:c["d"]})],h.prototype,"bills",void 0),u([Object(s["a"])(o["a"].loadBillTemplate,{namespace:c["d"]})],h.prototype,"loadTemplate",void 0),u([Object(s["a"])(o["a"].getBillDocumentPreview,{namespace:c["d"]})],h.prototype,"getBillDocumentPreview",void 0),u([Object(s["a"])(o["a"].saveBillTemplate,{namespace:c["d"]})],h.prototype,"saveTemplate",void 0),u([Object(s["a"])(o["a"].saveBillStyleTemplate,{namespace:c["d"]})],h.prototype,"saveStyleTemplate",void 0),u([Object(s["b"])(r["b"].getLanguage,{namespace:r["e"]})],h.prototype,"languageGlobal",void 0),u([Object(s["a"])(d["a"].notify,{namespace:d["c"]})],h.prototype,"notify",void 0),u([Object(n["Watch"])("languageGlobal")],h.prototype,"setGlobalLanguage",null),u([Object(n["Watch"])("selectedTemplate")],h.prototype,"getTemplateBySelection",null),h=u([Object(n["Component"])({components:{LanguageSimpleSelect:p["a"]}})],h);var g=h,v=g,b=(a("f530"),a("2877")),y=a("9989"),f=a("f09f"),T=a("a370"),w=a("eaac"),q=a("9c40"),C=a("ddd8"),P=a("27f9"),j=a("4b7e"),O=a("24e8"),L=a("7f67"),S=a("eebe"),B=a.n(S),x=Object(b["a"])(v,l,i,!1,null,null,null);t["default"]=x.exports;B()(x,"components",{QPage:y["a"],QCard:f["a"],QCardSection:T["a"],QTable:w["a"],QBtn:q["a"],QSelect:C["a"],QInput:P["a"],QCardActions:j["a"],QDialog:O["a"]}),B()(x,"directives",{ClosePopup:L["a"]})},f530:function(e,t,a){"use strict";a("54cd")}}]);