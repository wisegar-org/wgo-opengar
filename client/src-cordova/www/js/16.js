(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{6197:function(t,e,a){"use strict";a("7d64")},"7d64":function(t,e,a){},d2c1:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"page-quasar-tiptap-basic"},[t.template&&t.template.styleTemplate?a("div",{staticClass:"q-pa-md",staticStyle:{width:"100%"}},[a("q-card",{staticClass:"my-card bg-grey-1",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"row items-center justify-between q-table"},[a("div",{staticClass:"col-12 col-sm-auto no-wrap"},[a("div",{staticClass:"q-table__title ellipsis"},[t._v("\n              "+t._s(t.translationContent.WGO_FINANCE_ACCOUNTING_TEMPLATE_TITLE)+"\n            ")])]),a("div",{staticClass:"flex q-pb-sm justify-end col-12 col-sm-auto row",staticStyle:{"justify-content":"flex-end"}},[a("q-btn",{staticClass:"flex col-12 col-sm-auto q-ml-sm q-mb-sm",attrs:{unelevated:"",color:"primary",icon:"preview",label:t.translationContent.WGO_PREVIEW_BTN,"no-caps":""},on:{click:t.getPreview}}),a("q-btn",{staticClass:"flex col-12 col-sm-auto q-ml-sm q-mb-sm",attrs:{unelevated:"",color:"primary",icon:"save",label:t.translationContent.WGO_SAVE_BTN,"no-caps":""},on:{click:t.save}})],1)])]),a("q-card-section",[a("q-select",{attrs:{label:t.translationContent.WGO_FINANCE_ACCOUNTING_TEMPLATE_TYPE_LABEL,options:t.templateOptions},model:{value:t.selectedTemplate,callback:function(e){t.selectedTemplate=e},expression:"selectedTemplate"}}),a("div",{staticClass:"q-pb-lg"},[a("q-input",{attrs:{filled:"",type:"textarea",label:t.translationContent.WGO_FINANCE_ACCOUNTING_TEMPLATE_LABEL,rows:20},model:{value:t.template.body,callback:function(e){t.$set(t.template,"body",e)},expression:"template.body"}})],1),a("div",[a("q-input",{attrs:{filled:"",type:"textarea",label:t.translationContent.WGO_FINANCE_ACCOUNTING_TEMPLATE_STYLE_LABEL,rows:20},model:{value:t.template.styleTemplate.body,callback:function(e){t.$set(t.template.styleTemplate,"body",e)},expression:"template.styleTemplate.body"}})],1)],1),a("Loader",{attrs:{loading:t.showLoading}}),a("q-card-actions")],1),a("q-dialog",{attrs:{"full-height":"","full-width":"","auto-close":""},model:{value:t.showPreview,callback:function(e){t.showPreview=e},expression:"showPreview"}},[a("q-card",{staticClass:"column flex full-height full-width"},[a("iframe",{staticClass:"col",attrs:{srcdoc:t.content,height:"100%",width:"100%"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{unelevated:"",flat:"",label:t.translationContent.WGO_CLOSE_BTN}})],1)],1)],1):t._e()])},s=[],l=a("4bb5"),n=a("60a3"),i=a("cb57"),c=a("127a"),p=a("ea1a"),r=a("7641"),d=a("56bf"),m=function(t,e,a,o){var s,l=arguments.length,n=l<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var i=t.length-1;i>=0;i--)(s=t[i])&&(n=(l<3?s(n):l>3?s(e,a,n):s(e,a))||n);return l>3&&n&&Object.defineProperty(e,a,n),n},u=function(t,e,a,o){function s(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,l){function n(t){try{c(o.next(t))}catch(e){l(e)}}function i(t){try{c(o["throw"](t))}catch(e){l(e)}}function c(t){t.done?a(t.value):s(t.value).then(n,i)}c((o=o.apply(t,e||[])).next())}))};let h=class extends n["Vue"]{constructor(){super(...arguments),this.content="",this.template={},this.showPreview=!1,this.templateOptions=["ACCOUNTING_TEMPLATE","ACCOUNTING_EMAIL_TEMPLATE"],this.selectedTemplate=this.templateOptions[0],this.showLoading=!1}save(){return u(this,void 0,void 0,(function*(){const t=yield this.saveStyleTemplate({template:this.template.styleTemplate,documentToSet:this.template.id}),e=yield this.saveTemplate(this.template);t&&e?this.notify({message:this.translationContent.WGO_FINANCE_ACCOUNTING_TEMPLATE_SAVE_SUCCESS,type:"positive"}):this.notify({message:this.translationContent.WGO_FINANCE_ACCOUNTING_TEMPLATE_SAVE_FAIL,type:"negative"})}))}getPreview(){return u(this,void 0,void 0,(function*(){this.showLoading=!0,this.content=yield this.getBillDocumentPreview({entityTemplate:this.selectedTemplate,idAccounting:this.accoutings.length>0?this.accoutings[0].id:0,templateHTML:this.template.body,templateStyle:this.template.styleTemplate.body}),this.showLoading=!1,this.showPreview=!0}))}getTemplateBySelection(){return u(this,void 0,void 0,(function*(){this.template=yield this.loadTemplate(this.selectedTemplate)}))}mounted(){return u(this,void 0,void 0,(function*(){yield this.registerTranslations(d["a"]),yield this.loadData(!1),yield this.getTemplateBySelection()}))}};m([Object(l["a"])(r["a"].registerTranslations,{namespace:r["e"]})],h.prototype,"registerTranslations",void 0),m([Object(l["b"])(r["b"].getTranslations,{namespace:r["e"]})],h.prototype,"translationContent",void 0),m([Object(l["a"])(i["a"].loadAllAcounting,{namespace:c["d"]})],h.prototype,"loadData",void 0),m([Object(l["b"])(c["c"].getAccounting,{namespace:c["d"]})],h.prototype,"accoutings",void 0),m([Object(l["a"])(i["a"].loadAccountingTemplate,{namespace:c["d"]})],h.prototype,"loadTemplate",void 0),m([Object(l["a"])(i["a"].getAccountingDocumentPreview,{namespace:c["d"]})],h.prototype,"getBillDocumentPreview",void 0),m([Object(l["a"])(i["a"].saveAccountingTemplate,{namespace:c["d"]})],h.prototype,"saveTemplate",void 0),m([Object(l["a"])(i["a"].saveAccountingStyleTemplate,{namespace:c["d"]})],h.prototype,"saveStyleTemplate",void 0),m([Object(l["a"])(p["a"].notify,{namespace:p["c"]})],h.prototype,"notify",void 0),m([Object(n["Watch"])("selectedTemplate")],h.prototype,"getTemplateBySelection",null),h=m([Object(n["Component"])({})],h);var v=h,T=v,y=(a("6197"),a("2877")),b=a("9989"),f=a("f09f"),C=a("a370"),g=a("eaac"),_=a("9c40"),w=a("ddd8"),A=a("27f9"),E=a("4b7e"),O=a("24e8"),N=a("7f67"),L=a("eebe"),P=a.n(L),q=Object(y["a"])(T,o,s,!1,null,null,null);e["default"]=q.exports;P()(q,"components",{QPage:b["a"],QCard:f["a"],QCardSection:C["a"],QTable:g["a"],QBtn:_["a"],QSelect:w["a"],QInput:A["a"],QCardActions:E["a"],QDialog:O["a"]}),P()(q,"directives",{ClosePopup:N["a"]})}}]);