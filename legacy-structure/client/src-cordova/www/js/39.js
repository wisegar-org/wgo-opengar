(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{"19e3":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"row justify-evenly"},[o("div",{staticClass:"col-12 q-pa-md"},[o("DoctorsComponent")],1)])},a=[],s=o("60a3"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{width:"100%"}},[t.innerLoading?t._e():o("q-card",{staticClass:"bg-grey-1",attrs:{flat:"",bordered:""}},[o("q-card-section",[o("div",{staticClass:"row items-center justify-between q-table"},[o("div",{staticClass:"col-12 col-sm-auto no-wrap"},[o("div",{staticClass:"q-table__title ellipsis"},[t._v("\n            "+t._s(t.translationContent.CASINA_DOCTORS_ADMIN_TITLE)+"\n          ")])]),o("div",{staticClass:"flex q-pb-sm justify-end col-12 col-sm-auto row"},[o("q-btn",{staticClass:"col-12 col-sm-auto q-ml-sm q-mb-sm",attrs:{unelevated:"",color:"primary",icon:"save",label:t.translationContent.WGO_SAVE_BTN,"no-caps":""},on:{click:function(){return t.saveData()}}})],1)]),o("div",[o("TranslationComponent",{attrs:{translation:t.transDoctor,onChange:function(e,o){return t.onChangeIndexContent(t.traslationDoctorValue,e,o)}}})],1)]),o("q-separator",{attrs:{inset:""}}),o("q-card-section",[o("div",[o("q-input",{attrs:{flat:"",dense:"","lazy-rules":"ondemand",standout:"bg-primary text-white",autofocus:!0,label:t.translationContent.CASINA_DOCTORS_ADMIN_SEARCH_LABEL},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.searchFilter.apply(null,arguments))}},scopedSlots:t._u([{key:"append",fn:function(){return[""!==t.search?o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:t.cleanFilter}}):t._e(),o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"search"},on:{click:t.searchFilter}})]},proxy:!0},{key:"after",fn:function(){return[o("q-btn",{staticClass:"q-ml-sm",attrs:{unelevated:"",color:"primary",icon:"add",label:t.translationContent.WGO_ADD_BTN,"no-caps":""},on:{click:function(){return t.showAddEditorDialog=!0}}})]},proxy:!0}],null,!1,2968977182),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),o("q-card-section",[o("div",{staticClass:"q-pa-none",staticStyle:{width:"100%"}},[t.doctors.length?o("q-list",[t._l(t.doctors,(function(e,n){return[o("DoctorEditorExpanded",{key:"doctor"+e.id+"index"+n,attrs:{doctor:e,onSuccess:t.onSuccess,icon:"badge",title:e.content.name,groupName:"storageDoctors",showLoading:function(e){return t.loading=e}}})]}))],2):t._e(),o("div",{staticClass:"q-pa-lg flex flex-center"},[t.doctors.length?o("q-pagination",{attrs:{max:t.maxPage,input:"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)],1)])],1),o("DoctorEditorDialog",{attrs:{showModal:t.showAddEditorDialog,onSuccess:t.onSuccess}}),o("Loader",{attrs:{loading:t.innerLoading||t.loading}})],1)},r=[],c=o("1e1a"),l=o("7bf7"),d=o("7641"),p=o("4bb5"),u=o("4159"),h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Dialog",{attrs:{showModal:t.showModal,loading:t.showLoading,title:t.translationContent.CASINA_DOCTORS_ADMIN_CREATE_SERVICE_LABEL,close:function(){return t.onClose(!1)}}},[o("template",{slot:"content"},[o("DoctorEditor",{attrs:{close:t.onSuccess,showLoading:function(e){return t.showLoading=e}}})],1)],2)},f=[],m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("div",{staticClass:"flex justify-center"},[o("UploadImageDiv",{attrs:{img:t.form.image,onSavedImg:t.onSavedImg,ratio:1,width:"min(max(30vw, 150px), 200px)",showLoading:t.showLoading}})],1),o("TranslationSimpleComponent",{staticClass:"q-pa-sm",attrs:{translation:t.transName,label:t.translationContent.CASINA_DOCTORS_ADMIN_NAME_LABEL,onChange:function(e,o){return t.onChangeTranslation("name",e,o)}}}),o("TranslationSimpleComponent",{staticClass:"q-pa-sm",attrs:{translation:t.transDescription,label:t.translationContent.CASINA_DOCTORS_ADMIN_DESCRIPTION_LABEL,onChange:function(e,o){return t.onChangeTranslation("description",e,o)}}}),o("q-input",{staticClass:"q-ma-sm",attrs:{square:"",outlined:"","lazy-rules":"ondemand",label:t.translationContent.CASINA_DOCTORS_ADMIN_EMAIL_LABEL,standout:"bg-primary text-white",dense:"",rules:[function(e){return!!e||t.translationContent.WGO_ERROR_NULL_FIELD}]},model:{value:t.form.content.email,callback:function(e){t.$set(t.form.content,"email",e)},expression:"form.content.email"}})],1)]),o("q-card-section",{staticClass:"justify-center text-primary row"},[t.showClose?o("q-btn",{staticClass:"col-12 col-sm-auto q-mt-sm",attrs:{unelevated:"",color:"primary",icon:"close",align:"center",label:t.translationContent.WGO_CLOSE_BTN},on:{click:function(){return t.close(!1)}}}):t._e(),t.showDelete?o("q-btn",{staticClass:"col-12 col-sm-auto q-mt-sm",attrs:{unelevated:"",icon:"delete",color:"primary",align:"center",label:t.translationContent.WGO_DELETE_BTN},on:{click:function(){return t.showDeleteConfirm=!0}}}):t._e(),o("q-btn",{staticClass:"col-12 col-sm-auto q-mt-sm",attrs:{unelevated:"",icon:"save",color:"primary",align:"center",label:t.translationContent.WGO_SAVE_BTN},on:{click:function(){return t.updateProps()}}})],1),o("ConfirmDialog",{attrs:{icon:"delete",showModal:t.showDeleteConfirm,cancelButton:t.translationContent.WGO_CLOSE_BTN,okButton:t.translationContent.WGO_DELETE_BTN,text:t.translationContent.CASINA_DOCTORS_ADMIN_DELETE_TEXT,onConfirm:t.deleteDoctor,onClose:function(){return t.showDeleteConfirm=!1}}})],1)},C=[],g=o("78a7"),y=o("149f"),D=o("8924"),v=o("e07f"),_=o("ea1a"),O=function(t,e,o,n){var a,s=arguments.length,i=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,o,i):a(e,o))||i);return s>3&&i&&Object.defineProperty(e,o,i),i},b=function(t,e,o,n){function a(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,s){function i(t){try{c(n.next(t))}catch(e){s(e)}}function r(t){try{c(n["throw"](t))}catch(e){s(e)}}function c(t){t.done?o(t.value):a(t.value).then(i,r)}c((n=n.apply(t,e||[])).next())}))};let S=class extends s["Vue"]{constructor(){super(),this.form={id:0,type:u["a"],content:{name:"",description:"",email:"",nameKey:"",descriptionKey:""}},this.showDeleteConfirm=!1,this.translations={},this.transDescription={key:"transDescription",id:"transDescription"},this.transName={key:"transName",id:"transName"},this.doctor&&(this.form=Object.assign({},this.doctor),this.transDescription.key=this.doctor.content.descriptionKey,this.transDescription.id=this.doctor.content.descriptionKey,this.transName.key=this.doctor.content.nameKey,this.transName.id=this.doctor.content.nameKey)}onChangeTranslation(t,e,o){t in this.translations||(this.translations[t]={}),this.translations[t][e]=o}onSavedImg(t){this.form.image=t}deleteDoctor(){return b(this,void 0,void 0,(function*(){this.showLoading(!0),(yield this.deleteDoctorItem(this.form.id))?(this.close&&this.close(!0),this.notify({message:this.translationContent.CASINA_DOCTORS_ADMIN_SUCCESS_DELETE,type:"positive"})):this.notify({message:this.translationContent.CASINA_DOCTORS_ADMIN_FAIL_DELETE,type:"negative"}),this.showLoading(!1)}))}getTranslationItem(t){return Object.keys(t).map((e=>{const o=parseInt(e);return{languageId:o,value:t[o]}}))}updateProps(){return b(this,void 0,void 0,(function*(){this.showLoading(!0);const t=this.translations.description?this.getTranslationItem(this.translations.description):[],e=this.translations.name?this.getTranslationItem(this.translations.name):[],o={id:this.form.id,type:this.form.type,content:`${JSON.stringify({email:this.form.content.email,description:t,name:e})}`,image:this.form.image?this.form.image.id:0},n=this.doctor?yield this.modifyDoctorItem(o):yield this.createDoctorItem(o);n?(this.notify({message:this.doctor?this.translationContent.CASINA_DOCTORS_ADMIN_SUCCESS_EDIT:this.translationContent.CASINA_DOCTORS_ADMIN_SUCCESS_CREATE,type:"positive"}),this.close&&this.close(!0)):this.notify({message:this.doctor?this.translationContent.CASINA_DOCTORS_ADMIN_FAIL_EDIT:this.translationContent.CASINA_DOCTORS_ADMIN_FAIL_CREATE,type:"negative"}),this.showLoading(!1)}))}};O([Object(s["Prop"])()],S.prototype,"close",void 0),O([Object(s["Prop"])()],S.prototype,"showLoading",void 0),O([Object(s["Prop"])()],S.prototype,"doctor",void 0),O([Object(s["Prop"])({default:!0})],S.prototype,"showClose",void 0),O([Object(s["Prop"])({default:!1})],S.prototype,"showDelete",void 0),O([Object(p["b"])(d["b"].getTranslations,{namespace:d["e"]})],S.prototype,"translationContent",void 0),O([Object(p["a"])(_["a"].notify,{namespace:v["a"]})],S.prototype,"notify",void 0),O([Object(p["a"])(l["a"].createStorageItem,{namespace:l["e"]})],S.prototype,"createDoctorItem",void 0),O([Object(p["a"])(l["a"].modifyStorageItem,{namespace:l["e"]})],S.prototype,"modifyDoctorItem",void 0),O([Object(p["a"])(l["a"].deleteStorageItem,{namespace:l["e"]})],S.prototype,"deleteDoctorItem",void 0),S=O([Object(s["Component"])({components:{UploadImageDiv:g["a"],ConfirmDialog:y["a"],TranslationSimpleComponent:D["a"]}})],S);var I=S,E=I,T=o("2877"),A=o("27f9"),w=o("a370"),j=o("9c40"),N=o("eebe"),L=o.n(N),x=Object(T["a"])(E,m,C,!1,null,null,null),P=x.exports;L()(x,"components",{QInput:A["a"],QCardSection:w["a"],QBtn:j["a"]});var R=o("1d08"),q=function(t,e,o,n){var a,s=arguments.length,i=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,o,i):a(e,o))||i);return s>3&&i&&Object.defineProperty(e,o,i),i};let k=class extends s["Vue"]{constructor(){super(...arguments),this.showLoading=!1}onClose(t){this.onSuccess&&this.onSuccess(t)}};q([Object(p["b"])(d["b"].getTranslations,{namespace:d["e"]})],k.prototype,"translationContent",void 0),q([Object(s["Prop"])({default:!1})],k.prototype,"showModal",void 0),q([Object(s["Prop"])()],k.prototype,"onSuccess",void 0),k=q([Object(s["Component"])({components:{DoctorEditor:P,Dialog:R["a"]}})],k);var M=k,B=M,F=Object(T["a"])(B,h,f,!1,null,null,null),Q=F.exports,V=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Expanded",{attrs:{label:t.title,group:t.groupName,icon:t.icon}},[o("template",{slot:"content"},[o("div",{staticClass:"q-pa-sm"},[o("DoctorEditor",{attrs:{doctor:t.doctor,showLoading:t.showLoading,showDelete:!1,close:t.onSuccess,showClose:!1}})],1),o("ConfirmDialog",{attrs:{icon:"delete",showModal:t.showDeleteConfirm,cancelButton:t.translationContent.WGO_CLOSE_BTN,okButton:t.translationContent.WGO_DELETE_BTN,text:t.translationContent.CASINA_DOCTORS_ADMIN_DELETE_TEXT,onConfirm:t.deleteDoctor,onClose:function(){return t.showDeleteConfirm=!1}}})],1),o("template",{slot:"buttons"},[o("q-btn",{attrs:{flat:"",dense:"",icon:"delete",color:"negative"},on:{click:function(){return t.showDeleteConfirm=!0}}})],1)],2)},W=[],G=o("bfaf"),X=function(t,e,o,n){var a,s=arguments.length,i=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,o,i):a(e,o))||i);return s>3&&i&&Object.defineProperty(e,o,i),i},U=function(t,e,o,n){function a(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,s){function i(t){try{c(n.next(t))}catch(e){s(e)}}function r(t){try{c(n["throw"](t))}catch(e){s(e)}}function c(t){t.done?o(t.value):a(t.value).then(i,r)}c((n=n.apply(t,e||[])).next())}))};let $=class extends s["Vue"]{constructor(){super(...arguments),this.showDeleteConfirm=!1}deleteDoctor(){return U(this,void 0,void 0,(function*(){this.showLoading(!0),(yield this.deleteDoctorItem(this.doctor.id))?(this.onSuccess&&this.onSuccess(!0),this.notify({message:this.translationContent.CASINA_DOCTORS_ADMIN_SUCCESS_DELETE,type:"positive"})):this.notify({message:this.translationContent.CASINA_DOCTORS_ADMIN_FAIL_DELETE,type:"negative"}),this.showLoading(!1)}))}};X([Object(s["Prop"])()],$.prototype,"groupName",void 0),X([Object(s["Prop"])()],$.prototype,"icon",void 0),X([Object(s["Prop"])()],$.prototype,"title",void 0),X([Object(s["Prop"])()],$.prototype,"doctor",void 0),X([Object(s["Prop"])()],$.prototype,"showLoading",void 0),X([Object(s["Prop"])()],$.prototype,"onSuccess",void 0),X([Object(p["a"])(l["a"].deleteStorageItem,{namespace:l["e"]})],$.prototype,"deleteDoctorItem",void 0),X([Object(p["b"])(d["b"].getTranslations,{namespace:d["e"]})],$.prototype,"translationContent",void 0),X([Object(p["a"])(_["a"].notify,{namespace:_["c"]})],$.prototype,"notify",void 0),$=X([Object(s["Component"])({components:{DoctorEditor:P,Expanded:G["a"],ConfirmDialog:y["a"]}})],$);var K=$,J=K,z=Object(T["a"])(J,V,W,!1,null,null,null),H=z.exports;L()(z,"components",{QBtn:j["a"]});var Y=o("7fa3"),Z=o("0dd7"),tt=function(t,e,o,n){var a,s=arguments.length,i=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,o,i):a(e,o))||i);return s>3&&i&&Object.defineProperty(e,o,i),i},et=function(t,e,o,n){function a(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,s){function i(t){try{c(n.next(t))}catch(e){s(e)}}function r(t){try{c(n["throw"](t))}catch(e){s(e)}}function c(t){t.done?o(t.value):a(t.value).then(i,r)}c((n=n.apply(t,e||[])).next())}))};let ot=class extends s["Vue"]{constructor(){super(...arguments),this.innerLoading=!0,this.loading=!1,this.transDoctor={key:Z["b"],id:Z["b"]},this.traslationDoctorValue={},this.maxPage=0,this.currentPage=1,this.doctorsCount=0,this.doctorsXPage=5,this.search="",this.doctors=[],this.showAddEditorDialog=!1}loadFilter(){return et(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.loadDoctors({type:u["a"],urlApi:c["a"].API_STATIC_BASE,search:this.search,skip:(this.currentPage-1)*this.doctorsXPage,take:this.doctorsXPage,lang:this.language?this.language.id:0,loadTranslations:!1});this.doctorsCount=t.storageItemsCount,this.doctors=t.storageItems,this.maxPage=Math.floor(this.doctorsCount/this.doctorsXPage)+(this.doctorsCount%this.doctorsXPage>0?1:0),this.loading=!1}))}onChangeIndexContent(t,e,o){t[e]=o}getTranslationItem(t,e){return Object.keys(t).map((o=>{const n=parseInt(o);return{languageId:n,key:e,value:t[n]}}))}saveData(){return et(this,void 0,void 0,(function*(){this.loading=!0;let t=[];t=this.getTranslationItem(this.traslationDoctorValue,Z["b"]);const e={imageId:0,translations:t};if(yield this.setCasinaIndexContent(e)){const t={};this.language.id in this.traslationDoctorValue&&(t[Z["b"]]=this.traslationDoctorValue[this.language.id]),this.addTranslations(t),this.notify({message:this.translationContent.CASINA_DOCTORS_ADMIN_CONTENT_SUCCESS_EDIT,type:"positive"})}else this.notify({message:this.translationContent.CASINA_DOCTORS_ADMIN_CONTENT_FAIL_EDIT,type:"negative"});this.loading=!1}))}onSuccess(t){return et(this,void 0,void 0,(function*(){this.showAddEditorDialog=!1,t&&(yield this.loadFilter())}))}searchFilter(){return et(this,void 0,void 0,(function*(){this.currentPage=1,yield this.loadFilter()}))}cleanFilter(){return et(this,void 0,void 0,(function*(){this.search="",yield this.searchFilter()}))}created(){return et(this,void 0,void 0,(function*(){yield this.registerTranslations(u["b"]),this.transDoctor.value=this.translationContent.CASINA_INDEX_DOCTORS_TEXT,yield this.loadFilter(),this.innerLoading=!1}))}};tt([Object(p["a"])(d["a"].registerTranslations,{namespace:d["e"]})],ot.prototype,"registerTranslations",void 0),tt([Object(p["b"])(d["b"].getTranslations,{namespace:d["e"]})],ot.prototype,"translationContent",void 0),tt([Object(p["b"])(d["b"].getLanguage,{namespace:d["e"]})],ot.prototype,"language",void 0),tt([Object(p["a"])(l["a"].getDoctorsByPagination,{namespace:l["e"]})],ot.prototype,"loadDoctors",void 0),tt([Object(p["a"])(l["a"].setCasinaIndexContent,{namespace:l["e"]})],ot.prototype,"setCasinaIndexContent",void 0),tt([Object(p["c"])(d["d"].addTranslations,{namespace:d["e"]})],ot.prototype,"addTranslations",void 0),tt([Object(p["a"])(_["a"].notify,{namespace:v["a"]})],ot.prototype,"notify",void 0),tt([Object(s["Watch"])("currentPage"),Object(s["Watch"])("language")],ot.prototype,"loadFilter",null),ot=tt([Object(s["Component"])({components:{DoctorEditorDialog:Q,DoctorEditorExpanded:H,TranslationComponent:Y["a"]}})],ot);var nt=ot,at=nt,st=o("f09f"),it=o("eaac"),rt=o("eb85"),ct=o("0016"),lt=o("1c1c"),dt=o("3b16"),pt=Object(T["a"])(at,i,r,!1,null,null,null),ut=pt.exports;L()(pt,"components",{QCard:st["a"],QCardSection:w["a"],QTable:it["a"],QBtn:j["a"],QSeparator:rt["a"],QInput:A["a"],QIcon:ct["a"],QList:lt["a"],QPagination:dt["a"]});var ht=function(t,e,o,n){var a,s=arguments.length,i=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,o,i):a(e,o))||i);return s>3&&i&&Object.defineProperty(e,o,i),i};let ft=class extends s["Vue"]{};ft=ht([Object(s["Component"])({components:{DoctorsComponent:ut}})],ft);var mt=ft,Ct=mt,gt=o("9989"),yt=Object(T["a"])(Ct,n,a,!1,null,null,null);e["default"]=yt.exports;L()(yt,"components",{QPage:gt["a"]})}}]);