(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[45],{"5e84":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"row justify-evenly"},[n("div",{staticClass:"col-12 q-pa-md"},[n("ModulesComponent")],1)])},a=[],s=n("60a3"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%"}},[t.innerLoading?t._e():n("q-card",{staticClass:"bg-grey-1",attrs:{flat:"",bordered:""}},[n("q-card-section",[n("div",{staticClass:"row items-center justify-between q-table"},[n("div",{staticClass:"col-12 col-sm-auto no-wrap"},[n("div",{staticClass:"q-table__title ellipsis"},[t._v("\n            "+t._s(t.translationContent.FINANCE_MODULES_ADMIN_TITLE)+"\n          ")])]),n("div",{staticClass:"flex q-pb-sm justify-end col-12 col-sm-auto row"},[n("q-btn",{staticClass:"col-12 col-sm-auto q-ml-sm q-mb-sm",attrs:{unelevated:"",color:"primary",icon:"save",label:t.translationContent.WGO_SAVE_BTN,"no-caps":""},on:{click:function(){return t.saveData()}}})],1)]),n("div",[n("TranslationComponent",{attrs:{translation:t.transModule,onChange:function(e,n){return t.onChangeIndexContent(t.traslationModuleValue,e,n)}}})],1)]),n("q-separator",{attrs:{inset:""}}),n("q-card-section",[n("div",[n("q-input",{attrs:{flat:"",dense:"","lazy-rules":"ondemand",standout:"bg-primary text-white",autofocus:!0,label:t.translationContent.FINANCE_MODULES_ADMIN_SEARCH_LABEL},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.searchFilter.apply(null,arguments))}},scopedSlots:t._u([{key:"append",fn:function(){return[""!==t.search?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:t.cleanFilter}}):t._e(),n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"search"},on:{click:t.searchFilter}})]},proxy:!0},{key:"after",fn:function(){return[n("q-btn",{staticClass:"q-ml-sm",attrs:{unelevated:"",color:"primary",icon:"add",label:t.translationContent.WGO_ADD_BTN,"no-caps":""},on:{click:function(){return t.showAddEditorDialog=!0}}})]},proxy:!0}],null,!1,2968977182),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),n("q-card-section",[n("div",{staticClass:"q-pa-none",staticStyle:{width:"100%"}},[t.modulesList.length?n("q-list",[t._l(t.modulesList,(function(e,o){return[n("ModuleEditorExpanded",{key:"modules"+e.id+"index"+o,attrs:{moduleItem:e,onSuccess:t.onSuccess,icon:"badge",title:e.content.name,groupName:"storageModules",showLoading:function(e){return t.loading=e}}})]}))],2):t._e(),n("div",{staticClass:"q-pa-lg flex flex-center"},[t.modulesList.length?n("q-pagination",{attrs:{max:t.maxPage,input:"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)],1)])],1),n("ModuleEditorDialog",{attrs:{showModal:t.showAddEditorDialog,onSuccess:t.onSuccess}}),n("Loader",{attrs:{loading:t.innerLoading||t.loading}})],1)},r=[],l=n("1e1a"),c=n("7641"),d=n("4bb5"),u=n("0de2"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{showModal:t.showModal,loading:t.showLoading,title:t.translationContent.FINANCE_MODULES_ADMIN_CREATE_SERVICE_LABEL,close:function(){return t.onClose(!1)}}},[n("template",{slot:"content"},[n("ModuleEditor",{attrs:{close:t.onSuccess,showLoading:function(e){return t.showLoading=e}}})],1)],2)},h=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"flex justify-center"},[n("UploadImageDiv",{attrs:{img:t.form.image,onSavedImg:t.onSavedImg,ratio:1,width:"min(max(30vw, 150px), 200px)",showLoading:t.showLoading}})],1),n("TranslationSimpleComponent",{staticClass:"q-pa-sm",attrs:{translation:t.transName,label:t.translationContent.FINANCE_MODULES_ADMIN_NAME_LABEL,onChange:function(e,n){return t.onChangeTranslation("name",e,n)}}}),n("TranslationSimpleComponent",{staticClass:"q-pa-sm",attrs:{translation:t.transDescription,label:t.translationContent.FINANCE_MODULES_ADMIN_DESCRIPTION_LABEL,onChange:function(e,n){return t.onChangeTranslation("description",e,n)}}}),n("q-input",{staticClass:"q-ma-sm",attrs:{square:"",outlined:"","lazy-rules":"ondemand",label:t.translationContent.FINANCE_MODULES_ADMIN_PATH_LABEL,standout:"bg-primary text-white",dense:"",rules:[function(e){return!!e||t.translationContent.WGO_ERROR_NULL_FIELD}]},model:{value:t.form.content.path,callback:function(e){t.$set(t.form.content,"path",e)},expression:"form.content.path"}})],1)]),n("q-card-section",{staticClass:"justify-center text-primary row"},[t.showClose?n("q-btn",{staticClass:"col-12 col-sm-auto q-mt-sm",attrs:{unelevated:"",color:"primary",icon:"close",align:"center",label:t.translationContent.WGO_CLOSE_BTN},on:{click:function(){return t.close(!1)}}}):t._e(),t.showDelete?n("q-btn",{staticClass:"col-12 col-sm-auto q-mt-sm",attrs:{unelevated:"",icon:"delete",color:"primary",align:"center",label:t.translationContent.WGO_DELETE_BTN},on:{click:function(){return t.showDeleteConfirm=!0}}}):t._e(),n("q-btn",{staticClass:"col-12 col-sm-auto q-mt-sm",attrs:{unelevated:"",icon:"save",color:"primary",align:"center",label:t.translationContent.WGO_SAVE_BTN},on:{click:function(){return t.updateProps()}}})],1),n("ConfirmDialog",{attrs:{icon:"delete",showModal:t.showDeleteConfirm,cancelButton:t.translationContent.WGO_CLOSE_BTN,okButton:t.translationContent.WGO_DELETE_BTN,text:t.translationContent.FINANCE_MODULES_ADMIN_DELETE_TEXT,onConfirm:t.deleteModule,onClose:function(){return t.showDeleteConfirm=!1}}})],1)},f=[],g=n("78a7"),C=n("149f"),y=n("8924"),v=n("ea1a"),E=n("7bf7"),_=function(t,e,n,o){var a,s=arguments.length,i=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},b=function(t,e,n,o){function a(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function i(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):a(t.value).then(i,r)}l((o=o.apply(t,e||[])).next())}))};let I=class extends s["Vue"]{constructor(){super(),this.form={id:0,type:u["a"],content:{name:"",description:"",path:"",nameKey:"",descriptionKey:""}},this.showDeleteConfirm=!1,this.translations={},this.transDescription={key:"transDescription",id:"transDescription"},this.transName={key:"transName",id:"transName"},this.moduleItem&&(this.form=Object.assign({},this.moduleItem),this.transDescription.key=this.moduleItem.content.descriptionKey,this.transDescription.id=this.moduleItem.content.descriptionKey,this.transName.key=this.moduleItem.content.nameKey,this.transName.id=this.moduleItem.content.nameKey)}onChangeTranslation(t,e,n){t in this.translations||(this.translations[t]={}),this.translations[t][e]=n}onSavedImg(t){this.form.image=t}deleteModule(){return b(this,void 0,void 0,(function*(){this.showLoading(!0),(yield this.deleteModuleItem(this.form.id))?(this.close&&this.close(!0),this.notify({message:this.translationContent.FINANCE_MODULES_ADMIN_SUCCESS_DELETE,type:"positive"})):this.notify({message:this.translationContent.FINANCE_MODULES_ADMIN_FAIL_DELETE,type:"negative"}),this.showLoading(!1)}))}getTranslationItem(t){return Object.keys(t).map((e=>{const n=parseInt(e);return{languageId:n,value:t[n]}}))}updateProps(){return b(this,void 0,void 0,(function*(){this.showLoading(!0);const t=this.translations.description?this.getTranslationItem(this.translations.description):[],e=this.translations.name?this.getTranslationItem(this.translations.name):[],n={id:this.form.id,type:this.form.type,content:`${JSON.stringify({path:this.form.content.path,description:t,name:e})}`,image:this.form.image?this.form.image.id:0},o=this.moduleItem?yield this.modifyModuleItem(n):yield this.createModuleItem(n);o?(this.notify({message:this.moduleItem?this.translationContent.FINANCE_MODULES_ADMIN_SUCCESS_EDIT:this.translationContent.FINANCE_MODULES_ADMIN_SUCCESS_CREATE,type:"positive"}),this.close&&this.close(!0)):this.notify({message:this.moduleItem?this.translationContent.FINANCE_MODULES_ADMIN_FAIL_EDIT:this.translationContent.FINANCE_MODULES_ADMIN_FAIL_CREATE,type:"negative"}),this.showLoading(!1)}))}};_([Object(s["Prop"])()],I.prototype,"close",void 0),_([Object(s["Prop"])()],I.prototype,"showLoading",void 0),_([Object(s["Prop"])()],I.prototype,"moduleItem",void 0),_([Object(s["Prop"])({default:!0})],I.prototype,"showClose",void 0),_([Object(s["Prop"])({default:!1})],I.prototype,"showDelete",void 0),_([Object(d["b"])(c["b"].getTranslations,{namespace:c["e"]})],I.prototype,"translationContent",void 0),_([Object(d["a"])(v["a"].notify,{namespace:v["c"]})],I.prototype,"notify",void 0),_([Object(d["a"])(E["a"].createStorageItem,{namespace:E["e"]})],I.prototype,"createModuleItem",void 0),_([Object(d["a"])(E["a"].modifyStorageItem,{namespace:E["e"]})],I.prototype,"modifyModuleItem",void 0),_([Object(d["a"])(E["a"].deleteStorageItem,{namespace:E["e"]})],I.prototype,"deleteModuleItem",void 0),I=_([Object(s["Component"])({components:{UploadImageDiv:g["a"],ConfirmDialog:C["a"],TranslationSimpleComponent:y["a"]}})],I);var O=I,D=O,N=n("2877"),L=n("27f9"),M=n("a370"),w=n("9c40"),S=n("eebe"),T=n.n(S),j=Object(N["a"])(D,m,f,!1,null,null,null),A=j.exports;T()(j,"components",{QInput:L["a"],QCardSection:M["a"],QBtn:w["a"]});var x=n("1d08"),P=function(t,e,n,o){var a,s=arguments.length,i=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i};let F=class extends s["Vue"]{constructor(){super(...arguments),this.showLoading=!1}onClose(t){this.onSuccess&&this.onSuccess(t)}};P([Object(d["b"])(c["b"].getTranslations,{namespace:c["e"]})],F.prototype,"translationContent",void 0),P([Object(s["Prop"])({default:!1})],F.prototype,"showModal",void 0),P([Object(s["Prop"])()],F.prototype,"onSuccess",void 0),F=P([Object(s["Component"])({components:{ModuleEditor:A,Dialog:x["a"]}})],F);var q=F,k=q,U=Object(N["a"])(k,p,h,!1,null,null,null),R=U.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Expanded",{attrs:{label:t.title,group:t.groupName,icon:t.icon}},[n("template",{slot:"content"},[n("div",{staticClass:"q-pa-sm"},[n("ModuleEditor",{attrs:{moduleItem:t.moduleItem,showLoading:t.showLoading,showDelete:!1,close:t.onSuccess,showClose:!1}})],1),n("ConfirmDialog",{attrs:{icon:"delete",showModal:t.showDeleteConfirm,cancelButton:t.translationContent.WGO_CLOSE_BTN,okButton:t.translationContent.WGO_DELETE_BTN,text:t.translationContent.FINANCE_MODULES_ADMIN_DELETE_TEXT,onConfirm:t.deleteModule,onClose:function(){return t.showDeleteConfirm=!1}}})],1),n("template",{slot:"buttons"},[n("q-btn",{attrs:{flat:"",dense:"",icon:"delete",color:"negative"},on:{click:function(){return t.showDeleteConfirm=!0}}})],1)],2)},Q=[],V=n("bfaf"),W=function(t,e,n,o){var a,s=arguments.length,i=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},G=function(t,e,n,o){function a(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function i(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):a(t.value).then(i,r)}l((o=o.apply(t,e||[])).next())}))};let X=class extends s["Vue"]{constructor(){super(...arguments),this.showDeleteConfirm=!1}deleteModule(){return G(this,void 0,void 0,(function*(){this.showLoading(!0),(yield this.deleteModuleItem(this.moduleItem.id))?(this.onSuccess&&this.onSuccess(!0),this.notify({message:this.translationContent.FINANCE_MODULES_ADMIN_SUCCESS_DELETE,type:"positive"})):this.notify({message:this.translationContent.FINANCE_MODULES_ADMIN_FAIL_DELETE,type:"negative"}),this.showLoading(!1)}))}};W([Object(s["Prop"])()],X.prototype,"groupName",void 0),W([Object(s["Prop"])()],X.prototype,"icon",void 0),W([Object(s["Prop"])()],X.prototype,"title",void 0),W([Object(s["Prop"])()],X.prototype,"moduleItem",void 0),W([Object(s["Prop"])()],X.prototype,"showLoading",void 0),W([Object(s["Prop"])()],X.prototype,"onSuccess",void 0),W([Object(d["a"])(E["a"].deleteStorageItem,{namespace:E["e"]})],X.prototype,"deleteModuleItem",void 0),W([Object(d["b"])(c["b"].getTranslations,{namespace:c["e"]})],X.prototype,"translationContent",void 0),W([Object(d["a"])(v["a"].notify,{namespace:v["c"]})],X.prototype,"notify",void 0),X=W([Object(s["Component"])({components:{ModuleEditor:A,Expanded:V["a"],ConfirmDialog:C["a"]}})],X);var $=X,K=$,J=Object(N["a"])(K,B,Q,!1,null,null,null),z=J.exports;T()(J,"components",{QBtn:w["a"]});var H=n("7fa3"),Y=n("e07f"),Z=n("127a"),tt=function(t,e,n,o){var a,s=arguments.length,i=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},et=function(t,e,n,o){function a(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function i(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):a(t.value).then(i,r)}l((o=o.apply(t,e||[])).next())}))};let nt=class extends s["Vue"]{constructor(){super(...arguments),this.innerLoading=!0,this.loading=!1,this.transModule={key:u["b"],id:u["b"]},this.traslationModuleValue={},this.maxPage=0,this.currentPage=1,this.modulesCount=0,this.modulesXPage=5,this.search="",this.modulesList=[],this.showAddEditorDialog=!1}loadFilter(){return et(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.loadModules({type:u["a"],urlApi:l["a"].API_STATIC_BASE,search:this.search,skip:(this.currentPage-1)*this.modulesXPage,take:this.modulesXPage,lang:this.language?this.language.id:0,loadTranslations:!1});this.modulesCount=t.storageItemsCount,this.modulesList=t.storageItems,this.maxPage=Math.floor(this.modulesCount/this.modulesXPage)+(this.modulesCount%this.modulesXPage>0?1:0),this.loading=!1}))}onChangeIndexContent(t,e,n){t[e]=n}getTranslationItem(t,e){return Object.keys(t).map((n=>{const o=parseInt(n);return{languageId:o,key:e,value:t[o]}}))}saveData(){return et(this,void 0,void 0,(function*(){this.loading=!0;let t=[];t=this.getTranslationItem(this.traslationModuleValue,u["b"]);const e={imageId:0,translations:t};if(yield this.setFinanceIndexContent(e)){const t={};this.language.id in this.traslationModuleValue&&(t[u["b"]]=this.traslationModuleValue[this.language.id]),this.addTranslations(t),this.notify({message:this.translationContent.FINANCE_MODULES_ADMIN_CONTENT_SUCCESS_EDIT,type:"positive"})}else this.notify({message:this.translationContent.FINANCE_MODULES_ADMIN_CONTENT_FAIL_EDIT,type:"negative"});this.loading=!1}))}onSuccess(t){return et(this,void 0,void 0,(function*(){this.showAddEditorDialog=!1,t&&(yield this.loadFilter())}))}searchFilter(){return et(this,void 0,void 0,(function*(){this.currentPage=1,yield this.loadFilter()}))}cleanFilter(){return et(this,void 0,void 0,(function*(){this.search="",yield this.searchFilter()}))}created(){return et(this,void 0,void 0,(function*(){yield this.registerTranslations(u["c"]),this.transModule.value=this.translationContent.FINANCE_INDEX_MODULE_TEXT,yield this.loadFilter(),this.innerLoading=!1}))}};tt([Object(d["a"])(c["a"].registerTranslations,{namespace:c["e"]})],nt.prototype,"registerTranslations",void 0),tt([Object(d["b"])(c["b"].getTranslations,{namespace:c["e"]})],nt.prototype,"translationContent",void 0),tt([Object(d["b"])(c["b"].getLanguage,{namespace:c["e"]})],nt.prototype,"language",void 0),tt([Object(d["a"])(Z["b"].getModulesByPagination,{namespace:Z["d"]})],nt.prototype,"loadModules",void 0),tt([Object(d["a"])(Z["b"].setIndexContent,{namespace:Z["d"]})],nt.prototype,"setFinanceIndexContent",void 0),tt([Object(d["c"])(c["d"].addTranslations,{namespace:c["e"]})],nt.prototype,"addTranslations",void 0),tt([Object(d["a"])(v["a"].notify,{namespace:Y["a"]})],nt.prototype,"notify",void 0),tt([Object(s["Watch"])("currentPage"),Object(s["Watch"])("language")],nt.prototype,"loadFilter",null),nt=tt([Object(s["Component"])({components:{ModuleEditorDialog:R,ModuleEditorExpanded:z,TranslationComponent:H["a"]}})],nt);var ot=nt,at=ot,st=n("f09f"),it=n("eaac"),rt=n("eb85"),lt=n("0016"),ct=n("1c1c"),dt=n("3b16"),ut=Object(N["a"])(at,i,r,!1,null,null,null),pt=ut.exports;T()(ut,"components",{QCard:st["a"],QCardSection:M["a"],QTable:it["a"],QBtn:w["a"],QSeparator:rt["a"],QInput:L["a"],QIcon:lt["a"],QList:ct["a"],QPagination:dt["a"]});var ht=function(t,e,n,o){var a,s=arguments.length,i=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i};let mt=class extends s["Vue"]{};mt=ht([Object(s["Component"])({components:{ModulesComponent:pt}})],mt);var ft=mt,gt=ft,Ct=n("9989"),yt=Object(N["a"])(gt,o,a,!1,null,null,null);e["default"]=yt.exports;T()(yt,"components",{QPage:Ct["a"]})}}]);